# RF-731 Baseline and Scope Freeze (2026-02-28)

## Objective
Capture the pre-refactor baseline for control-plane behavior, route inventory, and deletion boundaries.

## Baseline Snapshot
- Repo size: `1.3G`
- `ui`: `740M`
- `substrate`: `553M`
- `.governance`: `456K`
- Governance status at snapshot:
  - ready: `UX-702`, `RF-731`
  - active assignments: none

## Current Route Surface (UI)
- App routes:
  - `ui/app/(app)/page.tsx` (placeholder)
  - `ui/app/(app)/dashboard/page.tsx` (starter page)
- Control plane routes (retain):
  - `ui/app/dev/wbs`
  - `ui/app/dev/packets`
  - `ui/app/dev/graph`
  - `ui/app/dev/audit`
  - `ui/app/dev/risks`
  - `ui/app/dev/terminal`
  - `ui/app/dev/settings`
- Marketplace routes (remove):
  - `ui/app/marketplace/**` (33 files)

## Control Plane Functionality to Preserve
- Governance API client and dev pages:
  - `ui/lib/governance/api-client.ts`
  - `ui/app/dev/**`
- Local dev WBS fallback API:
  - `ui/app/api/dev-wbs/route.ts`
- Node.js terminal UX + backend:
  - `ui/components/governance/PtyTerminal.tsx`
  - `ui/app/api/terminal/session/**`
  - `ui/lib/terminal/pty-manager.ts`

## Dependency Baseline (UI package)
- Candidate removal (marketplace/template-heavy or unused):
  - `@svar-ui/react-gantt`
  - `react-markdown`
  - `dayjs`
  - `@dnd-kit/*` (validate against remaining control-plane code)
- Must retain for terminal UX:
  - `@xterm/xterm`
  - `@xterm/addon-fit`

## WBS Definition Baseline
- Canonical active definition: `.governance/wbs.json`
- Additional tracked WBS JSON variants currently present in `.governance/`:
  - `wbs-draft.json`
  - `wbs-orchestration-improvements.json`
  - `wbs-phase6-final.json`
  - `wbs-template-ux-fix-proposal.json`
  - `wbs-template.json`

## Safe Deletion Boundaries (Approved for Follow-on Packets)
- Delete in-scope:
  - `ui/app/marketplace/**`
  - stale marketplace references from app/control-plane navigation and copy
  - extra WBS definition variants listed above (retain only `.governance/wbs.json` for definitions)
  - local generated `substrate/**` artifact tree
- Do not delete (retain core functionality):
  - `ui/app/dev/**`
  - `ui/app/api/terminal/**`
  - `ui/components/governance/PtyTerminal.tsx`
  - `ui/lib/terminal/pty-manager.ts`
  - `.governance/wbs_cli.py`, `.governance/packet-schema.json`, `.governance/wbs-schema.json`

## Validation Commands Run for Baseline
- `python3 .governance/wbs_cli.py context RF-731 --format json`
- `python3 .governance/wbs_cli.py briefing --format json`
- `find ui/app -maxdepth 2 -type d | sort`
- `rg -n "marketplace" ui/components ui/app ui/lib`
- `du -sh ui substrate .governance`
